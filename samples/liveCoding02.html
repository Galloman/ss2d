<style>body{ font-family: Verdana }</style>
<h3>SmoothStep2D Live Coding 02: Little Shooter</h3>
<h4>See the video here: <a target="_blank" href="http://www.youtube.com/watch?v=_1hZDi-zx2I">youtube.com/watch?v=S-nS3MIT-_s</a></h4>
<p>W,A,S,D keys for move <br />Space bar for shooting<p>
<canvas id="mainCanvas" width="512" height="512">No canvas Support!</canvas>
<script src="http://galloman.github.com/ss2d/lib/ss2dLib-min.js"></script>
<script id="lc02">
  var Bullet = function(x, y, w, h, r)
  {
    ss2d.Quad.call(this, x, y, w, h, '#ff0000');
    this.mLifeTime = 1;
    this.mRotation = r;
    this.mPivotX = w/2;
    this.mPivotY = h/2;
  }
  
  goog.inherits(Bullet, ss2d.Quad);
  
  Bullet.prototype.tick = function(deltaTime)
  {
    this.mLocation.mX += 300*deltaTime*Math.sin(-this.mRotation);
    this.mLocation.mY -= 300*deltaTime*Math.cos(-this.mRotation);
    this.mLifeTime -= deltaTime;
    if(this.mLifeTime <= 0)
      this.mParent.removeObject(this);
    
  }

  var view = new ss2d.View('mainCanvas');
  view.mBackgroundFillStyle = '#bbbbbb';
  
  var container = new ss2d.DisplayObjectContainer(200, 200);
  view.mMainScene.addObject(container);
  
  
  var cannon = new ss2d.Quad(-10, -60, 20, 60, '#000000');
  container.addObject(cannon);
  
  container.tick = function(deltaTime)
  {
    var input = ss2d.CURRENT_VIEW.mInput;
    
    if(input.isKeyPressed(ss2d.Input.Keys.A))
       this.mRotation += 3*deltaTime;
    
    if(input.isKeyPressed(ss2d.Input.Keys.D))
       this.mRotation -= 3*deltaTime;
    
    if(input.isKeyPressed(ss2d.Input.Keys.W))
    {   
      this.mLocation.mX += 200*deltaTime*Math.sin(-this.mRotation);
      this.mLocation.mY -= 200*deltaTime*Math.cos(-this.mRotation); 
    }
    
    if(input.isKeyPressed(ss2d.Input.Keys.S))
    {   
      this.mLocation.mX -= 200*deltaTime*Math.sin(-this.mRotation);
      this.mLocation.mY += 200*deltaTime*Math.cos(-this.mRotation); 
    }
    
    if(input.isKeyPressed(ss2d.Input.Keys.SPACE) && !this.mBarPressed)
    {   
      ss2d.CURRENT_VIEW.mMainScene.addObject(
      new Bullet(this.mLocation.mX + (65*Math.sin(-this.mRotation)), 
                 this.mLocation.mY - (65*Math.cos(-this.mRotation)), 
                 10, 10, this.mRotation));
    }
    
    this.mBarPressed = input.isKeyPressed(ss2d.Input.Keys.SPACE);
    
  }
  
  
  view.startLoop();
</script>
<pre class="prettyprint" id="code1">
</pre>
<script>
var c1 = document.getElementById('lc02').innerHTML;
document.getElementById('code1').innerHTML = c1;
</script>
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<link rel="stylesheet" type="text/css" href="http://google-code-prettify.googlecode.com/svn/trunk/styles/desert.css" />
