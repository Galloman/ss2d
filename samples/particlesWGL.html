<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>GPU Particles Demo</title>
        <style>
       		body{ font-family: Verdana; }         	
        	pre
			{
			    -moz-tab-size: 4;
			    -o-tab-size:   4;
			    tab-size:      4;
			}
		</style>
    </head>
    <body>
        <div></div>
        <h4>GPU Particles Demo</h4>
    	<p>You can pick and move any particle emitter.</p>
    	<p>Particles created with <a href="http://www.71squared.com/en/particledesigner" targeT="_blank">Particle Designer</a></p>
        <canvas id="mainCanvas" width="1024" height="512">No canvas Support!</canvas>
        <script src="http://galloman.github.com/ss2d/lib/ss2dLibWGL.js"></script>
        <script id="democode">
var view = new ss2d.View('mainCanvas');
view.mClearColor = [0.0, 0.0, 0.0, 1.0];
var loadingText = new ss2d.BitmapTextSprite(350, 256, 'LOADING', 'assets/fonts/fun02.fnt', 40);


ss2d.ResourceManager.loadResources([
	ss2d.ResourceManager.Loaders.BITMAP_FONT,
	'assets/fonts/fun02.fnt'
], null, function()
{
	view.mMainScene.addObject(loadingText);
	view.startLoop();
	view.stopLoop();
	ss2d.ResourceManager.loadResources([
		ss2d.ResourceManager.Loaders.PARTICLE_SYSTEM,
		'assets/particles/plasma.pex',
		'assets/particles/smoke01.pex',
		'assets/particles/heal01.pex',
		'assets/particles/spirit01.pex',
		'assets/particles/fireball02.pex',
		'assets/particles/fireball03.pex',
		'assets/particles/fireball04.pex',
		'assets/particles/fireball05.pex',
	], null, function()
	{
		setTimeout(function(){
			view.emitter = new ss2d.GPUParticleEmitter(140, 140, 100, 100, 'assets/particles/fireball05.pex');
			view.emitter.mPickable = new ss2d.Pickable(view.emitter);
			view.emitter.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter);
		}, 300);
		
		setTimeout(function(){
			view.emitter2 = new ss2d.GPUParticleEmitter(400, 156, 100, 100, 'assets/particles/fireball02.pex');
			view.emitter2.mPickable = new ss2d.Pickable(view.emitter2);
			view.emitter2.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter2);
		}, 600);
		
		setTimeout(function(){
			view.emitter3 = new ss2d.GPUParticleEmitter(456, 356, 100, 100, 'assets/particles/plasma.pex');
			view.emitter3.mPickable = new ss2d.Pickable(view.emitter3);
			view.emitter3.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter3);
		}, 900);
		
		setTimeout(function(){
			view.emitter4 = new ss2d.GPUParticleEmitter(200, 356, 100, 100, 'assets/particles/fireball03.pex');
			view.emitter4.mPickable = new ss2d.Pickable(view.emitter4);
			view.emitter4.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter4);
		}, 1200);
		
		setTimeout(function(){
			view.emitter5 = new ss2d.GPUParticleEmitter(570, 156, 100, 100, 'assets/particles/spirit01.pex');
			view.emitter5.mPickable = new ss2d.Pickable(view.emitter5);
			view.emitter5.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter5);
		}, 1500);
		
		setTimeout(function(){
			view.emitter6 = new ss2d.GPUParticleEmitter(570, 356, 100, 100, 'assets/particles/heal01.pex');
			view.emitter6.mPickable = new ss2d.Pickable(view.emitter6);
			view.emitter6.tick = function(deltaTime){ this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter6);
		}, 1800);
		
		setTimeout(function(){
			view.emitter7 = new ss2d.GPUParticleEmitter(770, 300, 100, 100, 'assets/particles/smoke01.pex');
			view.emitter7.mPickable = new ss2d.Pickable(view.emitter7);
			view.emitter7.tick = function(deltaTime){ this.mRotation += 3*deltaTime; this.mPickable.tick(deltaTime); this.updateParticles(deltaTime); };
			view.mMainScene.addObject(view.emitter7);
		}, 2100);
		
		setTimeout(function(){
			view.mMainScene.removeObject(loadingText);
			view.startLoop();
		}, 2400);
		
		view.mMainScene.addObject(view.eSprite);
	 
	});
});
		</script>
		  <pre class="prettyprint" id="code1">
		  </pre>
		  <script>
		  var c1 = document.getElementById('democode').innerHTML;
		  document.getElementById('code1').innerHTML = c1;
		  </script>
		  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
		  <link rel="stylesheet" type="text/css" href="http://google-code-prettify.googlecode.com/svn/trunk/styles/desert.css" />
    </body>
</html>
